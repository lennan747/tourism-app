(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-reflectdo"],{"04ea":function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",[t.show?t._e():e("v-uni-view",{staticClass:"padding margin bg-red "},[this.date!=parseInt(this.withdraw_date)?e("v-uni-view",{staticClass:"text-center"},[e("v-uni-view",[t._v("今天不是提现日期")])],1):t._e(),t.withdrawed?e("v-uni-view",[e("v-uni-view",{staticClass:"text-center"},[t._v("审核中...")]),e("v-uni-view",[t._v("提现金额:"+t._s(t.withdrawed.application_amount)+"￥")]),e("v-uni-view",[t._v("提现日期:"+t._s(t.withdrawed.application_date))])],1):t._e()],1),t.show?e("v-uni-view",[e("v-uni-form",{staticClass:"padding margin"},[e("v-uni-view",{staticClass:"cu-form-group margin flex justify-center",staticStyle:{"background-color":"#F1F1F1"}},[e("v-uni-view",{staticClass:"cu-capsule round"},[e("v-uni-view",{staticClass:"cu-tag bg-red"},[t._v("费率")]),e("v-uni-view",{staticClass:"cu-tag line-red"},[t._v(t._s(t.bank_rate)+"%")])],1),e("v-uni-view",{staticClass:"cu-capsule round"},[e("v-uni-view",{staticClass:"cu-tag bg-red "},[t._v("到账")]),e("v-uni-view",{staticClass:"cu-tag line-red"},[t._v(t._s(t.actual_amount<1?0:t.actual_amount)+"￥")])],1)],1),e("v-uni-view",{staticClass:"cu-form-group margin"},[e("v-uni-view",{staticClass:"title"},[t._v("提现金额")]),e("v-uni-input",{attrs:{placeholder:"0.00",name:"input",value:t.application_amount},on:{input:function(a){a=t.$handleEvent(a),t.ActualAmount(a)}}})],1),e("v-uni-view",{staticClass:"text-right margin padding-lr text-shadow"},[t._v("你的余额为:"),e("v-uni-text",{staticClass:"text-red text-shadow"},[t._v(t._s(t.you_amount)+"￥")]),t._v("，可提现"),e("v-uni-text",{staticClass:"text-red text-shadow"},[t._v(t._s(t.can_amount)+"￥")])],1),e("v-uni-view",{staticClass:"cu-form-group margin"},[e("v-uni-view",{staticClass:"title"},[t._v("提现账户")]),e("v-uni-picker",{attrs:{value:t.index,"range-key":"account",range:t.banks},on:{change:function(a){a=t.$handleEvent(a),t.PickerChange(a)}}},[e("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.type[t.banks[t.index].type])+" "+t._s(t.banks[t.index].account))])],1)],1),e("v-uni-navigator",{staticClass:"text-right margin padding-lr text-red text-shadow",attrs:{url:"/pages/user/bankcards"}},[e("v-uni-text",[t._v("提现账户管理")])],1),e("v-uni-view",[e("v-uni-view",{staticClass:"bg-red round text-center padding-sm margin",on:{click:function(a){a=t.$handleEvent(a),t.withdraw(a)}}},[t._v("申请提现")])],1)],1)],1):t._e(),e("v-uni-view",{staticClass:"text-left padding-lr margin text-sm text-center text-gray"},[e("v-uni-view",{staticClass:"padding-bottom-sm text-center text-red"},[t._v("提现须知")]),e("v-uni-view",{staticClass:"padding-bottom-sm text-center"},[t._v("每次提现不得超过"+t._s(t.withdraw_amount)+"￥")]),e("v-uni-view",{staticClass:"padding-bottom-sm text-center"},[t._v("每月"+t._s(t.bank_rate)+"日可提现")]),e("v-uni-view",{staticClass:"padding-bottom-sm text-center"},[t._v("提现费率为 "+t._s(t.bank_rate)+"%")]),e("v-uni-view",{staticClass:"padding-bottom-sm text-center"},[t._v("提现金额必须大于1块")]),e("v-uni-view",{staticClass:"padding-bottom-sm text-center"},[t._v("请选择可用提现账户")])],1)],1)},i=[];e.d(a,"a",function(){return n}),e.d(a,"b",function(){return i})},1536:function(t,a,e){"use strict";e.r(a);var n=e("04ea"),i=e("f479");for(var s in i)"default"!==s&&function(t){e.d(a,t,function(){return i[t]})}(s);var r=e("2877"),u=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,"4e5773aa",null);a["default"]=u.exports},9438:function(t,a,e){"use strict";var n=e("288e");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(e("e814"));e("96cf");var s=n(e("3b8d")),r=e("a05c"),u={data:function(){return{banks:[{account:"111"},{account:"111"}],type:{wechat:"微信",alipay:"支付宝",bank:"银行卡"},index:0,bank_rate:0,withdraw_date:0,date:0,withdraw_amount:0,userInfo:{},can_amount:0,you_amount:0,actual_amount:0,application_amount:"",numList:[{name:"申请"},{name:"审核"},{name:"结果"}],withdrawed:!1,show:!0}},onShow:function(){var t=(0,s.default)(regeneratorRuntime.mark(function t(){var a,e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.date=(new Date).getDate(),a=uni.getStorageSync("site_config"),console.log(a),e=uni.getStorageSync("user_info"),n=uni.getStorageSync("withdrawed"),console.log(n),this.bank_rate=a.bank_rate.value,this.withdraw_date=a.withdraw_date.value,this.withdraw_amount=(0,i.default)(a.withdraw_amount.value),this.you_amount=(0,i.default)(e.money),this.you_amount>this.withdraw_amount?this.can_amount=this.withdraw_amount:this.can_amount=this.you_amount,!n){t.next=15;break}return this.withdrawed=n,this.show=!1,t.abrupt("return");case 15:if(this.date==(0,i.default)(this.withdraw_date)){t.next=18;break}return this.show=!1,t.abrupt("return");case 18:return t.next=20,this.loadData();case 20:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),methods:{loadData:function(){var t=(0,s.default)(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.bankList)();case 2:a=t.sent,a&&(this.banks=a.data,console.log(this.banks));case 4:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),PickerChange:function(t){console.log(t),this.index=t.detail.value},ActualAmount:function(t){if(""==t.detail.value||t.detail.value<=0)return this.actual_amoun=0,void(this.application_amount=0);var a=(0,i.default)(t.detail.value);this.actual_amount=(a-a*(this.bank_rate/100)).toFixed(2),this.application_amount=a},withdraw:function(){var t=(0,s.default)(regeneratorRuntime.mark(function t(){var a,e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(this.application_amount),a=/^(([1-9]\d*)|\d)(\.\d{1,2})?$/,!(null==this.application_amount||""==this.application_amount||this.application_amount<1)){t.next=5;break}return uni.showToast({icon:"none",title:"请输入正确的金额！"}),t.abrupt("return",!1);case 5:if(a.test(this.application_amount)){t.next=8;break}return uni.showToast({icon:"none",title:"请输入正确的金额格式！"}),t.abrupt("return",!1);case 8:if(!(this.application_amount>this.you_amount||this.application_amount>this.can_amount)){t.next=11;break}return uni.showToast({icon:"none",title:"超出可提现金额"}),t.abrupt("return",!1);case 11:return t.next=13,(0,r.createWithdraw)({application_amount:this.application_amount,bank_card_id:this.banks[this.index].id});case 13:e=t.sent,console.log(e),e&&(this.withdrawed=e.data.withdraw,this.show=!1,uni.setStorageSync("withdrawed",this.withdrawed));case 16:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()}};a.default=u},f479:function(t,a,e){"use strict";e.r(a);var n=e("9438"),i=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(a,t,function(){return n[t]})}(s);a["default"]=i.a}}]);